<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Inherit Smart Button to redirect meeting URL and boolean field to enable Teams Meeting Link -->
        <record id="view_calendar_teams_link" model="ir.ui.view">
            <field name="name">calendar.teams_link.form</field>
            <field name="model">calendar.event</field>
            <field name='inherit_id' ref='calendar.view_calendar_event_form'/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_join_video_call']"
                       position="after">
                    <button name="action_redirect_link"
                            class="btn btn-link ps-0"
                            help="Join Teams Meeting" type="object"
                            invisible="not teams_meeting_url">
                        <span class="oi oi-arrow-right"/>
                        <span>Join Teams Meeting</span>
                    </button>
                </xpath>
                <xpath expr="//field[@name='categ_ids']"
                       position="before">
                    <field name="teams_meeting_url"
                           widget="CopyClipboardChar"/>
                </xpath>
                <xpath expr="//page[@name='page_invitations']"
                       position="before">
                    <page name="teams_meeting" string="Microsoft Teams">
                        <h1>Microsoft Teams</h1>
                        <group name="page_teams_link">
                            <field name="teams_link_check"/>
                            <field name="warning_check"
                                   invisible="1"/>
                            <field name="description"/>
                        </group>
                        <span style="color: red;"
                              invisible="not warning_check">
                            * Teams Meeting will be deleted by disabling it.
                        </span>
                    </page>
                </xpath>
                <xpath expr="//field[@name='description']" position="replace">
                </xpath>
            </field>
        </record>
    </data>
</odoo>
